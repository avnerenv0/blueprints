version: 1
deploy:
    steps:
        setupVariables:
          after:
            - curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.0.3/powershell-7.0.3-linux-x64.tar.gz -o powershell.tar.gz
            - tar zxf powershell.tar.gz -C /opt/
            - chmod +x /opt/pwsh
            - pwsh
            - curl -fsSL https://get.helm.sh/helm-v3.3.1-linux-amd64.tar.gz -o helm-v3.3.1-linux-amd64.tar.gz 
            - tar -zxvf helm-v3.3.1-linux-amd64.tar.gz 
            - mv linux-amd64/helm /opt/helm
            - helm version
            - aws --version
            - gcloud --version
            - az --version
            - python --version
            - python3 --version
            - git --version
            - npm --version
            - yarn --version
            - node --version
            - pip --version
            - pip2 --version
            - pip3 --version
            - kubectl version --client
            - tfenv --version
            - terraform --version
destroy:
    onCompletion:
      - echo "destroy-onCompletion!!!"
